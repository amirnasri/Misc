import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;

/*
 * Sep 11, 2015
 * http://community.topcoder.com/stat?c=problem_statement&pm=10154&rd=13694
 */

class LampsGrid {
	static HashMap<String, Integer[]> hm = new HashMap<>();
	
	public static int mostLit(String[] initial, int K) {
		
		for (String row: initial) {
			Integer[] val = hm.get(row);
			if (val == null) {
				int zeros_cnt = 0;
				for (int i = 0; i < row.length(); i++) {
					if (row.charAt(i) == '0')
						zeros_cnt++;
				}
				hm.put(row, new Integer[]{1, zeros_cnt});
			}
			else {
				val[0]++;
				hm.put(row, val);
			}
		}
		// Instead of sorting in O(n log n), we can do O(n) by going through the list and finding the best
		// although each operation would be more costly.
		List<Integer[]> values = new ArrayList<>(hm.values());
		Collections.sort(values, new Comparator<Integer[]>() {
			public int compare(Integer[] i1, Integer[] i2) {
				return Integer.compare(i1[0], i2[0]);
			}
		});
		
		for (int i = 0; i < values.size(); i++) {
			int index = values.size() - i - 1;
			int zeros_num = values.get(index)[1];
			if (K >= zeros_num && K % 2 == zeros_num % 2) {
				return values.get(index)[0];
			}
		}
		return 0;
	}
	public static void main(String[] args) {
		String[] initial = new String[]	{"00100001101101101100110111110011010110101100001101", "00100001101101101100110111110011010110101100001101", "01101011001100010100101110010011011011100111101100", "11001111101110100100011011000110000100101100000001", "01111001101100100001010011011010001010111001001110", "11001111101110100100011011000110000100101100000001", "00100000110100101100111110110001001001010000110011", "00100000110100101100111110110001001001010000110011", "01111001101100100001010011011010001010111001001110", "01101011001100010100101110010011011011100111101100", "00100001101101101100110111110011010110101100001101", "00100001101101101100110111110011010110101100001101", "01101011001100010100101110010011011011100111101100", "00100001101101101100110111110011010110101100001101", "00100001101101101100110111110011010110101100001101", "01101011001100010100101110010011011011100111101100", "00100001101101101100110111110011010110101100001101", "00100001101101101100110111110011010110101100001101", "01101011001100010100101110010011011011100111101100", "01111001101100100001010011011010001010111001001110", "01101011001100010100101110010011011011100111101100", "00110100000011101101000110111101111101011111011000", "00100000110100101100111110110001001001010000110011", "01101011001100010100101110010011011011100111101100", "01101011001100010100101110010011011011100111101100", "00100001101101101100110111110011010110101100001101", "00100000110100101100111110110001001001010000110011", "01101011001100010100101110010011011011100111101100", "00100000110100101100111110110001001001010000110011", "01101011001100010100101110010011011011100111101100", "00100001101101101100110111110011010110101100001101", "01101011001100010100101110010011011011100111101100", "11001111101110100100011011000110000100101100000001", "00100001101101101100110111110011010110101100001101", "00100001101101101100110111110011010110101100001101", "00100000110100101100111110110001001001010000110011", "01101011001100010100101110010011011011100111101100", "11001111101110100100011011000110000100101100000001", "00100000110100101100111110110001001001010000110011", "00100000110100101100111110110001001001010000110011", "01101011001100010100101110010011011011100111101100", "00100000110100101100111110110001001001010000110011", "01101011001100010100101110010011011011100111101100", "01101011001100010100101110010011011011100111101100", "01101011001100010100101110010011011011100111101100", "00100000110100101100111110110001001001010000110011", "00100001101101101100110111110011010110101100001101", "11001111101110100100011011000110000100101100000001"};
		int K = 28;
		System.out.println(mostLit(initial, K));
	}
}